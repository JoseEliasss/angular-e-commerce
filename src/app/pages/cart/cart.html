<app-header></app-header>

<div class="cart-container" *ngIf="cartItems$ | async as items">
  <table class="cart-table" *ngIf="items.length > 0">
    <thead>
      <tr>
        <th>Product</th>
        <th>Price</th>
        <th>Quantity</th>
        <th>Subtotal</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let item of localCart; let i = index">
        <td class="product-cell">
          <button class="remove-btn" (click)="removeItem(i)">&#10006;</button>
          <img [src]="item.image" alt="{{ item.title }}" />
          <span>{{ item.title }}</span>
        </td>
        <td>${{ item.price }}</td>
        <td>
          <div class="qty-controls">
            <button (click)="decreaseQty(i)">-</button>
            <b>{{ item.quantity }}</b>
            <button (click)="increaseQty(i)">+</button>
          </div>
        </td>
        <td>${{ item.price * item.quantity }}</td>
      </tr>
    </tbody>
  </table>

  <div class="actions" *ngIf="localCart.length > 0">
    <button class="return-btn" (click)="goToShop()">Return To Shop</button>
    <button class="return-btn" (click)="clearCart()">Clear Cart</button>
  </div>

  <div class="coupon-and-total" *ngIf="localCart.length > 0">
    <div class="cart-summary">
      <h3>Cart Total</h3>
      <p>
        <span>Subtotal:</span> <span>${{ total }}</span>
      </p>
      <p><span>Shipping:</span> <span>Free</span></p>
      <p class="total">
        <span>Total:</span> <span>${{ total }}</span>
      </p>
      <button class="checkout-btn" (click)="goToCheckout()">
        Proceed to checkout
      </button>
    </div>
  </div>

  <div class="empty-cart" *ngIf="localCart.length === 0">
    <p>Your cart is empty.</p>
    <button (click)="goToShop()" class="shopNow">Shop Now!</button>
  </div>
</div>

<app-footer></app-footer>
